#cloud-config
autoinstall:
  version: 1
  interactive-sections:
    - none

  identity:
    hostname: pc2
    username: aihphome
    password: "$6$vibepc2$.oK8M1odJ1dmdmiIUnkSdYV.Rw7GefnNK7aoUsuNwOuY2WQVGE7lzwT6OtKeS42cpPyzLykCqQP97FHk21UoQ1"

  ssh:
    install-server: true
    allow-pw: true
    authorized-keys:
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFcMLXX4Cu+eYP+twXr/QAEJkFvF5n2S9w84ywhlV/+p pc2_tmp"

  network:
    version: 2
    ethernets:
      lan0:
        match:
          macaddress: "08:2e:5f:20:8e:39"
        set-name: eno1
        dhcp4: true

  storage:
    config:
      - id: disk-wdc
        type: disk
        match:
          serial: "WD-WXE608K4E303"
          model: "WDC WD2500BEVS-75UST0"
        ptable: gpt
        wipe: superblock-recursive
        grub_device: true

      - id: part-efi
        type: partition
        device: disk-wdc
        size: 512M
        flag: boot

      - id: part-biosgrub
        type: partition
        device: disk-wdc
        size: 1M
        flag: bios_grub

      - id: part-root
        type: partition
        device: disk-wdc
        size: -1

      - id: fmt-efi
        type: format
        volume: part-efi
        fstype: fat32

      - id: fmt-root
        type: format
        volume: part-root
        fstype: ext4

      - id: mnt-root
        type: mount
        device: fmt-root
        path: /

      - id: mnt-efi
        type: mount
        device: fmt-efi
        path: /boot/efi
